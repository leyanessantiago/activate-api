// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "postgres"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
	id				Int		@default(autoincrement()) @id
	userName		String	@unique @db.VarChar(255)
	email			String	@unique
	name			String	@db.VarChar(255)
	lastName		String	@db.VarChar(255)
	password		String
	isPublisher		Boolean	@default(false)
	friends			User[]	@relation(name: "UserFriends")
	following		User[]	@relation(name: "UserFollows", references: [id])
	followedBy		User[]	@relation("UserFollows", references: [id])
	eventsPublished	Event[]	@relation(name: "EventAuthor")
	eventsFollowed	Event[]	@relation(name: "EventFollowers")
}

model Category {
	id		Int		@default(autoincrement()) @id
	name	String	@unique @db.VarChar(255)
}

model Event {
	id			Int			@default(autoincrement()) @id
	name		String		@db.VarChar(255)
	date		DateTime
	address		String
	description	String?
	image		String?
	category	Category	@relation(fields: [categoryId], references: [id])
	categoryId	Int
	author		User		@relation(name: "EventAuthor", fields: [authorId], references: [id])
	authorId	Int
	followers	User[]		@relation(name: "EventFollowers")
	comments	Comment[]
}

model Comment {
	id			Int		@default(autoincrement()) @id
	date		DateTime
	content		String
	response	String?
	author		User	@relation(fields: [authorId], references: [id])
	authorId	Int
	event		Event	@relation(fields: [eventId], references: [id])
	eventId		Int
}

model Activity {
	id		Int		@default(autoincrement()) @id
	type	String
	content	String
	user	User	@relation(fields: [userId], references: [id])
	userId	Int
}
